{"apiDocsVersion":"1.0.0","docsData":{"releaseVersion":"","langLibs":[],"modules":[{"relatedModules":[],"records":[],"classes":[],"objectTypes":[{"fields":[],"methods":[],"isDistinct":true,"name":"AbstractPersistClient","description":"Represents the abstract persist client. This abstract object is used in the generated client.\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false}],"serviceTypes":[],"clients":[],"listeners":[],"functions":[{"accessor":"","resourcePath":"","isIsolated":true,"isRemote":false,"isResource":false,"isExtern":true,"parameters":[{"defaultValue":"","type":{"isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":true,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0,"elementType":{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}},"name":"elementType","description":"","isDeprecated":false,"isReadOnly":false},{"defaultValue":"","type":{"isAnonymousUnionType":false,"isInclusion":false,"isArrayType":true,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":1,"elementType":{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}},"name":"arr","description":"","isDeprecated":false,"isReadOnly":false}],"returnParameters":[{"type":{"isAnonymousUnionType":false,"isInclusion":false,"isArrayType":true,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":1,"elementType":{"name":"elementType","category":"reference","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":false,"memberTypes":[],"arrayDimensions":0}},"name":"","description":"","isDeprecated":false,"isReadOnly":false}],"annotationAttachments":[],"name":"convertToArray","description":"","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"accessor":"","resourcePath":"","isIsolated":true,"isRemote":false,"isResource":false,"isExtern":false,"parameters":[{"defaultValue":"","type":{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"\u0027object","description":"","isDeprecated":false,"isReadOnly":false},{"defaultValue":"","type":{"isAnonymousUnionType":false,"isInclusion":false,"isArrayType":true,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":1,"elementType":{"name":"string","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}},"name":"fields","description":"","isDeprecated":false,"isReadOnly":false}],"returnParameters":[{"type":{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"","description":"","isDeprecated":false,"isReadOnly":false}],"annotationAttachments":[],"name":"filterRecord","description":"","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"accessor":"","resourcePath":"","isIsolated":true,"isRemote":false,"isResource":false,"isExtern":false,"parameters":[{"defaultValue":"","type":{"name":"string","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"entity","description":"The name of the entity  \n","isDeprecated":false,"isReadOnly":false},{"defaultValue":"","type":{"name":"anydata","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"key","description":"The key of the record\n","isDeprecated":false,"isReadOnly":false}],"returnParameters":[{"type":{"orgName":"ballerina","moduleName":"persist","version":"1.6.0","name":"AlreadyExistsError","category":"errors","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"","description":"The generated `persist:AlreadyExistsError`\n","isDeprecated":false,"isReadOnly":false}],"annotationAttachments":[],"name":"getAlreadyExistsError","description":"Generates a new `persist:AlreadyExistsError` with the given parameters.\n\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"accessor":"","resourcePath":"","isIsolated":true,"isRemote":false,"isResource":false,"isExtern":false,"parameters":[{"defaultValue":"","type":{"isAnonymousUnionType":true,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[{"name":"anydata","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}],"arrayDimensions":0},"name":"\u0027object","description":"","isDeprecated":false,"isReadOnly":false},{"defaultValue":"","type":{"isAnonymousUnionType":false,"isInclusion":false,"isArrayType":true,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":1,"elementType":{"name":"string","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}},"name":"keyFields","description":"","isDeprecated":false,"isReadOnly":false}],"returnParameters":[{"type":{"isAnonymousUnionType":true,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[{"name":"anydata","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},{"category":"inline_record","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0}],"arrayDimensions":0},"name":"","description":"","isDeprecated":false,"isReadOnly":false}],"annotationAttachments":[],"name":"getKey","description":"","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"accessor":"","resourcePath":"","isIsolated":true,"isRemote":false,"isResource":false,"isExtern":false,"parameters":[{"defaultValue":"","type":{"name":"string","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"entity","description":"The name of the entity  \n","isDeprecated":false,"isReadOnly":false},{"defaultValue":"","type":{"name":"anydata","category":"builtin","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"key","description":"The key of the record\n","isDeprecated":false,"isReadOnly":false}],"returnParameters":[{"type":{"orgName":"ballerina","moduleName":"persist","version":"1.6.0","name":"NotFoundError","category":"errors","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"name":"","description":"The generated `persist:NotFoundError`\n","isDeprecated":false,"isReadOnly":false}],"annotationAttachments":[],"name":"getNotFoundError","description":"Generates a new `persist:NotFoundError` with the given parameters.\n\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false}],"constants":[],"annotations":[],"errors":[{"detailType":{"orgName":"ballerina","moduleName":"persist","version":"1.6.0","name":"Error","category":"errors","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"isDistinct":true,"name":"AlreadyExistsError","description":"Represents an error that occurs when the user attempts to create a record which already exists in the database.\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"detailType":{"orgName":"ballerina","moduleName":"persist","version":"1.6.0","name":"Error","category":"errors","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"isDistinct":true,"name":"ConstraintViolationError","description":"Represents an error that occurs when an attempt is made to perform an operation, which violates a foreign key constraint.\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"isDistinct":true,"name":"Error","description":"Defines the generic error type for the `persist` module.\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false},{"detailType":{"orgName":"ballerina","moduleName":"persist","version":"1.6.0","name":"Error","category":"errors","isAnonymousUnionType":false,"isInclusion":false,"isArrayType":false,"isNullable":false,"isOptional":false,"isTuple":false,"isIntersectionType":false,"isParenthesisedType":false,"isTypeDesc":false,"isRestParam":false,"isDeprecated":false,"isPublic":false,"generateUserDefinedTypeLink":true,"memberTypes":[],"arrayDimensions":0},"isDistinct":true,"name":"NotFoundError","description":"Represents an error that occurs when an attempt is made to retrieve a record using a non-existing key.\n","descriptionSections":[],"isDeprecated":false,"isReadOnly":false}],"types":[],"unionTypes":[],"simpleNameReferenceTypes":[],"tupleTypes":[],"tableTypes":[],"mapTypes":[],"intersectionTypes":[],"typeDescriptorTypes":[],"functionTypes":[],"streamTypes":[],"arrayTypes":[],"anyDataTypes":[],"anyTypes":[],"stringTypes":[],"integerTypes":[],"decimalTypes":[],"xmlTypes":[],"booleanTypes":[],"enums":[],"variables":[],"configurables":[],"resources":[],"id":"persist","summary":"This module provides Ballerina `persist` features, which provides functionality to store and query data conveniently through a data model.\n","description":"# Module Overview\n\nThis module provides Ballerina `persist` features, which provides functionality to store and query data conveniently through a data model.\n\nThe `persist` tools provides following functionalities,\n1. Define and validate the entity data model definitions in the `persist` folder\n2. Initialize the Ballerina Persistence Layer for every model definitions in the `persist` folder\n3. Generate persistence derived entity types and clients \n4. Push persistence schema to the data store (only with supported data sources)\n5. Migration support for supported data stores (experimental feature)\n\n## Data Model Definitions\n\nWithin a Ballerina project, the data model should be defined in a separate bal file under the `persist` directory. This file is not considered part of the Ballerina project and is used only for data model definition.\n\nThe Ballerina `persist` library defines a mechanism to express the application\u0027s data model using Ballerina record types. All record types will be an entity in the model.\n\n### Entity Type Definition\n\nAn EntityType is defined using `SimpleType` and `EntityType` fields.\n\n```ballerina\n   // This are the type definitions for the data model when using MySQL\n    type SimpleType ()|boolean|int|float|decimal|string|byte[]|time:Date|time:TimeOfDay|time:Utc|time:Civil;\n    type EntityType record {|\n       SimpleType|EntityType|EntityType[]...;\n    |};\n```\n\n\u003e *Note*: The data types for `SimpleType` supported by `persist` will vary by data source. For example, the `byte` type is not supported by MySQL.\n\nThis design use fields of type `EntityType` or `EntityType[]` to define associations between two entities.\n\nHere are some examples of entity type definitions:\n\n```ballerina\n// Valid with MySQL, in-memory and Google Sheets\ntype Employee record {|\n   int id;\n   string fname;\n   string lname;\n   Department department; // EntityType\n|};\n\n// Valid with MySQL and in-memory\ntype Department record {|\n   int id;\n   string name;\n   byte[] logo; // Google Sheets does not support array types\n   Employee[] employees; // EntityType\n|};\n\n// Valid with in-memory only\ntype Department record {|\n   int id;\n   string name;\n   int[] integerArray; // MySQL only supports `byte[]` array type and Google Sheets does not support array types\n   Employee[] employees; // EntityType\n|};\n\n// Invalid with all data sources\n Employee record {|\n   int|string id;  // Persist does not support union data types\n   string fname;\n   string lname;\n   Department department; // EntityType\n|};\n```\n### Entity Attributes Definition\n\nBallerina record fields are used to model the attributes of an entity. The type of the field should be a subtype of SimpleType.\n\n#### Identity Field(s)\n\nThe entity must contain at least one identity field. The field\u0027s value is used to identify each record uniquely. The identity field(s) is indicated `readonly` flag.\n\n\u003e *Note*: Only `int`, `string`, `float`, `boolean`, and `decimal` types are supported as identity fields.\n\n```ballerina\ntype EntityType record {|\n    readonly T \u003cfieldName\u003e;\n|} \n```\nThe identity field can be a single field or a combination of multiple fields.\n\n```ballerina\ntype EntityType record {|\n    readonly T \u003cfieldName1\u003e;\n    readonly T \u003cfieldName2\u003e;\n|} \n```\n\n#### Nullable Field(s)\n\nSay type T is a subtype of SimpleType, and T does not contain (),\n\n| Field definition  |                           Semantics                           |       Examples       |  \n|:-----------------:|:-------------------------------------------------------------:|:--------------------:|  \n|      T field      | Mapped to a non-nullable type in the datastore (if supported) |       int id;        |  \n|     T? field      |   Mapped to a nullable type in the datastore (if supported)   | string? description; |  \n|     T field?      |                          Not allowed                          |          -           |  \n|     T? field?     |                          Not allowed                          |          -           |\n\n### Relationship Definition\n\nBallerina record fields are used to model a connection between two entities. The type of the field should be a subtype of EntityType|EntityType?|EntityType[].\n\nThis design supports the following cardinalities:\n1. One-to-one (1-1)\n2. One-to-many (1-n)\n\nThe relation field is mandatory in both entities.\n\n#### One-to-one (1-1)\n\nA 1-1 relationship is defined by a field of type `EntityType` in one entity and `EntityType?` in the other.\n\n```ballerina\ntype Car record {|\n   readonly int id;\n   string name;\n   User owner;\n|};\n\ntype User record {|\n   readonly int id;\n   string name;\n   Car? car;\n|};\n```\n\nThe above entities explains the following,\n- A `Car` must have a `User` as the owner.\n- A `User` may own a `Car` or do not own one.\n\nThe first record, `Car`, which holds the `EntityType` field `owner` is taken as the owner in the 1-1 relationship and will include the foreign key of the second record, `User`.\n\nThe default foreign key field name will be `ownerId` in the `Car` table, which refers to the identity field of the `User` table by default. (`\u003clowercasedRelatedFieldName\u003e\u003cFirst-LetterCapitalizedIdentityFieldName\u003e`)\n\n#### One-to-Many (1-n)\n\nA 1-n relationship is defined by a field of type `EntityType` in one entity and `EntityType[]` in the other.\n\n```ballerina\ntype Car record {|\n   readonly int id;\n   string name;\n   User owner;\n|};\n\ntype User record {|\n   int id;\n   string name;\n   Car[] cars;\n|};\n```\n\nThe above entities explains the following,\n- A `Car` must have a `User` as the owner.\n- A `User` may own multiple `Car`s or do not own one. (Represented with empty array `[]`)\n-\nThe entity that contains the field of type `EntityType` is taken as the owner in the 1-n relationship.\n","orgName":"ballerina","version":"1.6.0","isDefaultModule":true}]},"searchData":{"modules":[{"id":"persist","description":"This module provides Ballerina `persist` features, which provides functionality to store and query data conveniently through a data model.\n","orgName":"ballerina","version":"1.6.0","isDefaultModule":true}],"classes":[],"functions":[{"id":"convertToArray","description":"","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"filterRecord","description":"","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"getAlreadyExistsError","description":"Generates a new `persist:AlreadyExistsError` with the given parameters.\n\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"getKey","description":"","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"getNotFoundError","description":"Generates a new `persist:NotFoundError` with the given parameters.\n\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"}],"records":[],"constants":[],"errors":[{"id":"AlreadyExistsError","description":"Represents an error that occurs when the user attempts to create a record which already exists in the database.\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"ConstraintViolationError","description":"Represents an error that occurs when an attempt is made to perform an operation, which violates a foreign key constraint.\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"Error","description":"Defines the generic error type for the `persist` module.\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"},{"id":"NotFoundError","description":"Represents an error that occurs when an attempt is made to retrieve a record using a non-existing key.\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"}],"types":[],"clients":[],"listeners":[],"annotations":[],"objectTypes":[{"id":"AbstractPersistClient","description":"Represents the abstract persist client. This abstract object is used in the generated client.\n","moduleId":"persist","moduleOrgName":"ballerina","moduleVersion":"1.6.0"}],"enums":[]}}